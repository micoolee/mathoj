<view class="container">
  <!-- <scroll-view> -->
  <view class="search flex-wrp ">
    <view class="search-left flex-item">
      <image src="../../images/search1.png" bindtap='search'></image>
      <input placeholder-class="search-placeholder" bindinput='writesearch' bindconfirm='search' value='{{inputvalue}}' />
    </view>

    <view class="search-right flex-item" bindtap="showquestool">
      <image src="../../images/write.png"></image>
    </view>
    <view class="search-center flex-item" bindtap="showquestool">
      提问
    </view>
  </view>
  <!-- </scroll-view> -->

  <view class="page ">
    <view>

      <swiper class="swiper-boxs " indicator-dots autoplay duration="500">
        <swiper-item wx:for="{{topStories}}" wx:key="{{index}}">
          <navigator url="../storydetail/storydetail?id={{topStories[index].storyid}}">
            <image mode="aspectFill" class="swiper-boxs-img" src="{{topStories[index].storypic}}" />
          </navigator>
        </swiper-item>
      </swiper>
    </view>



    <view class="weui-tab ">
      <view class="weui-navbar ">
        <block wx:for="{{tabs}}" wx:key="*this">
          <view id="{{index}}" class="weui-navbar__item {{activeIndex == index ? 'weui-bar__item_on' : ''}}" bindtap="tabClick">
            <view class="weui-navbar__title">{{item}}</view>
          </view>
        </block>
        <view class="weui-navbar__slider" style="left: {{sliderLeft}}px; transform: translateX({{sliderOffset}}px); -webkit-transform: translateX({{sliderOffset}}px);"></view>
      </view>
      <view class="weui-tab__panel">
        <view class="weui-tab__content" hidden="{{activeIndex != 0}}">


          <view class="cxj-menu">
            <view class="flex-view{{item.active?' active':''}}" wx:for="{{tabTxt}}">
              <picker bindchange="filterTabChild" name="gradeindex" value="{{item.value}}" range="{{item.value}}" data-index='{{index}}'>
                {{item.text}}
                <image src="/images/arrow.png" class="cxj-icon"></image>
              </picker>
            </view>
          </view>


          <!--正文  体现一下遮罩效果的-->
          <view class="cxj-content">
            <view wx:if='{{havenewbtn}}' class='weui-cells weui-cells_after-title' style='text-align:center;'>
              <text>有人提问啦~</text>
            </view>
            <block wx:for="{{problemlist}}" wx:key="{{item.problemid}}" wx:for-index="idx" wx:for-item="item" data-idx="{{idx}}">
              <view class="feed-item">
                <view class="feed-source">
                  <a>
                    <view class="avatar">
                      <image src="{{item.avatar}}" bindtap='showmore' data-avatar='{{item.avatar}}' data-userid='{{item.askid}}' data-username='{{item.username}}' data-openid='{{item.openid}}'></image>
                    </view>
                    <text>{{item.username}}     </text>
                  </a>

                  <text style='margin-right:auto'>{{item.asktime}}</text>

                  <view wx:if="{{shareindexlist[idx]=='1'}}">
                    <button open-type='share' bindtap='clickshare' data-problemid='{{item.problemid}}'>share</button>
                  </view>

                </view>
                <view class="feed-content">
                  <view class="question" qid="{{question_id}}" data-id='{{item.problemid}}' bindtap="bindQueTap">
                    <a class="question-link">
                      <text class='line-3'>{{item.description}}</text>

                    </a>
                  </view>
                  <view class="answer-body">
                    <view bindtap="bindItemTap">
                      <text class="answer-txt" aid="{{answer_id}}">{{item.fields.solver}}</text>
                    </view>
                    <view class="answer-actions" data-id='{{item.problemid}}' bindtap="bindQueTap">

                      <view class="comments ">
                        <view wx:if="{{item.solution_num != null}}">
                          {{item.solution_num}} 回答
                        </view>
                        <view wx:else>0 回答</view>
                      </view>



                      <view class="comments ">
                        <view wx:if="{{item.comment_num != null}}">
                          {{item.comment_num}} 评论
                        </view>
                        <view wx:else>0 评论</view>
                      </view>

                      <view class="follow-it">
                        <view wx:if="{{item.subscribe_num != null}}">
                          {{item.subscribe_num}} 关注
                        </view>
                        <view wx:else>0 关注</view>
                      </view>
                      <view class="comments ">
                        <view wx:if="{{item.browse_num != null}}">
                          {{item.browse_num}} 浏览
                        </view>
                        <view wx:else>0 浏览</view>
                      </view>

                    </view>
                  </view>
                </view>
              </view>
            </block>
          </view>
          <view class="weui-loadmore weui-loadmore_line" wx:if="{{bottom}}">
            <view class="weui-loadmore__tips weui-loadmore__tips_in-line">我是有底线的</view>
          </view>
        </view>

        <view class="weui-tab__content" hidden="{{activeIndex != 1}}">



          <view class="cxj-menu">
            <view class="flex-view{{item.active?' active':''}}" wx:for="{{tabTxt}}">
              <picker bindchange="filterTabChild" name="gradeindex" value="{{item.value}}" range="{{item.value}}" data-index='{{index}}'>
                {{item.text}}
                <image src="/images/arrow.png" class="cxj-icon"></image>
              </picker>
            </view>
          </view>



          <block wx:for="{{solvedproblemlist}}" wx:for-index="idx" wx:for-item="item" data-idx="{{idx}}">
            <view class="feed-item">
              <view class="feed-source">
                <a>
                  <view class="avatar">
                    <image src="{{item.avatar}}" bindtap='showmore' data-avatar='{{item.avatar}}' data-userid='{{item.askid}}' data-username='{{item.username}}' data-openid='{{item.openid}}'></image>
                  </view>
                  <text>{{item.username}}{{item.feed_source_txt}}</text>
                </a>
              </view>
              <view class="feed-content">
                <view class="question" qid="{{question_id}}" data-id='{{item.problemid}}' bindtap="bindQueTap">
                  <a class="question-link">
                    <text class='line-3'>{{item.description}}</text>
                  </a>
                </view>
                <view class="answer-body">
                  <view bindtap="bindItemTap">
                    <text class="answer-txt" aid="{{answer_id}}">{{item.solver}}</text>
                  </view>
                  <view class="answer-actions" bindtap="bindItemTap">
                    <view class="comments dot">
                      <view wx:if="{{item.comment_num != null}}">
                        {{item.comment_num}}评论
                      </view>
                      <view wx:else>0 评论</view>
                    </view>

                    <view class="follow-it">
                      <view wx:if="{{item.subscribe_num != null}}">
                        {{item.subscribe_num}}关注
                      </view>
                      <view wx:else>0 关注</view>
                    </view>
                  </view>
                </view>
              </view>
            </view>
          </block>
        <view class="weui-loadmore weui-loadmore_line" wx:if="{{bottom}}">
          <view class="weui-loadmore__tips weui-loadmore__tips_in-line">我是有底线的</view>
        </view>
        </view>

      </view>

    </view>
  </view>
  <image src='../../images/totop.png' bindtap='totop' style='position:fixed;bottom:20px;right:20px;width:40px;height:40px;'></image>
</view>